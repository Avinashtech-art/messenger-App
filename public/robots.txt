
import React, { useState, useRef, useEffect } from "react";
import "./chat.css";
import ChatSidebar from "./ChatSidebar.js";
import Search from "./Search.js";
import ChatHeader from "./Header";
import { useDispatch, useSelector } from "react-redux";
import { addMessage, deleteMessage, editMessage } from "../features/chat/chatSlice";

export function ChatUI() {
  const [newMessage, setNewMessage] = useState("");
  const [isFirstUser, setIsFirstUser] = useState(true);
  const messagesEndRef = useRef(null);
  const [editingMessageId, setEditingMessageId] = useState(null);
  const [editingMessageContent, setEditingMessageContent] = useState("");
  
  const dispatch = useDispatch();
  const messages = useSelector((state) => state.chat.messages);

  const handleSubmit = (event) => {
    event.preventDefault();
    if (newMessage.trim()) {
      dispatch(addMessage(newMessage.trim()));
    }
    setNewMessage("");
  };

  const handleEdit = (id, content) => {
    dispatch(editMessage({ id, content }));
  };

  const handleSaveEdit = (id, content) => {
    dispatch(editMessage({ id, content }));
  };

  const handleDelete = (id) => {
    dispatch(deleteMessage(id));
  };

  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [messages]);

  return (
    <div className="grid-container ">
      <ChatHeader />

      <div className="chatGrid-UI">
        <div className="UI">
          <div className="chat-container">
            <ul className="text">
              {messages.map((message) => (
                <div key={message.id} className="message-container">
                  {message.sender === "user1" ? (
                    <div>
                      <span>
                        <div className="message-left">
                          <div className="box">
                            {editingMessageId === message.id ? (
                              <>
                                <input
                                  type="text"
                                  value={editingMessageContent}
                                  onChange={(e) =>
                                    setEditingMessageContent(e.target.value)
                                  }
                                />
                                <button
                                  onClick={() =>
                                    handleSaveEdit(
                                      editingMessageId,
                                      editingMessageContent
                                    )
                                  }
                                >
                                  Save
                                </button>
                              </>
                            ) : (
                              message.content
                            )}
                          </div>
                          <div className="buttons">
                            {editingMessageId !== message.id && (
                              <li>
                                {" "}
                                <button
                                  onClick={() => handleEdit(message.id, message.content)}
                                >
                                  Edit
                                </button>
                              </li>
                            )}
                            <li>
                              {" "}
                              <button onClick={() => handleDelete(message.id)}>
                                Delete
                              </button>
                            </li>
                          </div>
                        </div>
                      </span>
                    </div>
                  ) : (
                    <div className="message-right">
                      <div className="box">
                        {editingMessageId === message.id ? (
                          <>
                            <input
                              type="text"
                              value={editingMessageContent}
                              onChange={(e) =>
                                setEditingMessageContent(e.target.value)
                              }
                            />
                            <button
                              onClick={() =>
                                handleSaveEdit(
                                  editingMessageId,
                                  editingMessageContent
                                )
                              }
                            >
                              Save
                            </button>
                          </>
                        ) : (
                          message.content
                        )}
                      </div>
                      <div className="buttons">
                        {editingMessageId !== message.id && (
                          <button
                            onClick={() => handleEdit(message.id, message.content)}
                          >
                            Edit
                          </button>
                        )}
                        <button onClick={() => handleDelete(message.id)}>
                          Delete
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              ))}
              <div ref={messagesEndRef} />
            </ul>
          </div>

          <div className="container-form">
            <div className="form">
              <form onSubmit={handleSubmit} className="form-container">
                <div className="form-childOne">
                  <input
                    type="text"
                    className="input-section"
                    value={newMessage}
                    onChange={(event) => setNewMessage(event.target.value)}
                  />
                </div>

                <div className="form-childtwo">
                  <div className="switch">
                    <label>
                      <input
                        type="checkbox"
                        checked={isFirstUser}
                        onChange={() => setIsFirstUser(!isFirstUser)}
                      />
                      <span className="slider round"></span>
                      <br></br>
                      <br></br>
                      {/* {/ {isFirstUser ? "user1" : "user2"} /} */}
                    </label>
                  </div>
                </div>

                <div className="form-childthree">
                  <button type="submit">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      className="bi bi-send-fill"
                      viewBox="0 0 16 16"
                    >
                      <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z" />
                    </svg>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <Search />
      <ChatSidebar />
    </div>
  );
}

export default ChatUI;




import React, { useState, useRef, useEffect } from "react";
import "./chat.css";
import ChatSidebar from "./ChatSidebar.js";
import Search from "./Search.js";
import ChatHeader from "./Header";
import { useDispatch, useSelector } from "react-redux";

import {
  addMessage,
  deleteMessage,
  editMessage,
} from "../features/chat/chatSlice";

export function ChatUI() {
  const [messages, setMessages] = useState([]);
  const [newMessage, setNewMessage] = useState("");
  const [isFirstUser, setIsFirstUser] = useState(true);
  const messagesEndRef = useRef(null);
  const [editingMessageId, setEditingMessageId] = useState(null);
  const [editingMessageContent, setEditingMessageContent] = useState("");

  // const dispatch = useDispatch();
  // const messages = useSelector((state) => state.chat.messages);

  // generate a unique ID for each message
  const generateId = () => {
    return Math.floor(Math.random() * 100000);
  };

  // const handleSubmit = (event) => {
  //   event.preventDefault();
  //   if (newMessage.trim()) {
  //     // what it done here?
  //     const message = {
  //       id: generateId(),
  //       content: newMessage.trim(),
  //       sender: isFirstUser ? "user1" : "user2",
  //     };
  //     setMessages([...messages, message]);
  //   }
  //   setNewMessage("");
  // };

  // const handleEdit = (id, content) => {
  //   setEditingMessageId(id);
  //   setEditingMessageContent(content);
  // };

  // const handleSaveEdit = (id, content) => {
  //   const updatedMessages = messages.map((message) => {
  //     if (message.id === id) {
  //       return { ...message, content: content };
  //     }
  //     return message;
  //   });
  //   setMessages(updatedMessages);
  //   setEditingMessageId(null);
  //   setEditingMessageContent("");
  // };

  // const handleDelete = (id) => {
  //   const updatedMessages = messages.filter((message) => message.id !== id);
  //   setMessages(updatedMessages);
  // };

 

  const chats = useSelector((state) => state.chat);
  const dispatch = useDispatch();

  const handleSubmit = (event) => {
    event.preventDefault();
    if (newMessage.trim()) {
      dispatch(addMessage(newMessage.trim()));
    }
    setNewMessage("");
  };

  const handleEdit = (id, content) => {
    setEditingMessageId(id);
    setEditingMessageContent(content);
  };

  const handleSaveEdit = (id, content) => {
    dispatch(editMessage({ id, content }));
    setEditingMessageId(null);
    setEditingMessageContent("");
  };

  const handleDelete = (id) => {
    dispatch(deleteMessage(id));
  };


  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [messages]);

  return (
    <div className="grid-container ">
      <ChatHeader />

      <div className="chatGrid-UI">
        <div className="UI">
          <div className="chat-container">
            <ul className="text">
              {messages.map((message) => (
                <div key={message.id} className="message-container">
                  {message.sender === "user1" ? ( // Change this implementation, make use of a flag which tells whether the message is sender/reciever.
                    <div>
                      <span>
                        <div className="message-left">
                          <div className="box">
                            {editingMessageId === message.id ? (
                              <>
                                <input
                                  type="text"
                                  value={editingMessageContent}
                                  onChange={(e) =>
                                    setEditingMessageContent(e.target.value)
                                  }
                                />

                                <button
                                  onClick={() =>
                                    handleSaveEdit(
                                      editingMessageId,
                                      editingMessageContent
                                    )
                                  }
                                >
                                  Save
                                </button>
                              </>
                            ) : (
                              message.content
                            )}
                          </div>
                          <div className="buttons">
                            {editingMessageId !== message.id && (
                              <li>
                                {" "}
                                <button
                                  onClick={() =>
                                    dispath(editMessage(message.id, message.content))
                                  }
                                >

                                <button
                                  onClick={() =>
                                    handleEdit(message.id, message.content)
                                  }
                                >
                                  Edit
                                </button>
                              </li>
                            )}
                            <li>
                              {" "}
                              <button onClick={() => handleDelete(message.id)}>
                                Delete
                              </button>
                            </li>
                          </div>
                        </div>
                      </span>
                      {/* <span>
                    <Space className="dropdown-demo"/>
                      <Dropdown droplist={dropList} position="bl">
                        <Button type="text">
                         : 
                        </Button>
                      </Dropdown>
                    </span> */}
                    </div>
                  ) : (
                    <div className="message-right">
                      <div className="box">
                        {editingMessageId === message.id ? (
                          <>
                            <input
                              type="text"
                              value={editingMessageContent}
                              onChange={(e) =>
                                setEditingMessageContent(e.target.value)
                              }
                            />
                            <button
                              onClick={() =>
                                handleSaveEdit(
                                  editingMessageId,
                                  editingMessageContent
                                )
                              }
                            >
                              Save
                            </button>
                            {/* <button onClick={handleCancelEdit}>Cancel</button> */}
                          </>
                        ) : (
                          message.content
                        )}
                      </div>
                      <div className="buttons">
                        {editingMessageId !== message.id && (
                          <button
                            onClick={() =>
                              handleEdit(message.id, message.content)
                            }
                          >
                            Edit
                          </button>
                        )}
                        <button onClick={() => handleDelete(message.id)}>
                          Delete
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              ))}
              <div ref={messagesEndRef} />
            </ul>
          </div>

          <div className="container-form">
            <div className="form">
              <form onSubmit={handleSubmit} className="form-container">
                <div className="form-childOne">
                  <input
                    type="text"
                    className="input-section"
                    value={newMessage}
                    onChange={(event) => setNewMessage(event.target.value)}
                  />
                </div>

                <div className="form-childtwo">
                  <div className="switch">
                    <label>
                      <input
                        type="checkbox"
                        checked={isFirstUser}
                        onChange={() => setIsFirstUser(!isFirstUser)}
                      />
                      <span className="slider round"></span>
                      <br></br>
                      <br></br>
                      {/* {/ {isFirstUser ? "user1" : "user2"} /} */}
                    </label>
                  </div>
                </div>

                <div className="form-childthree">
                  <button type="submit">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      className="bi bi-send-fill"
                      viewBox="0 0 16 16"
                    >
                      <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z" />
                    </svg>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <Search />
      <ChatSidebar />
    </div>
  );
}

export default ChatUI;





.............................

import React, { useState, useRef, useEffect } from "react";
import "./chat.css";
import ChatSidebar from "./ChatSidebar.js";
import Search from "./Search.js";
import ChatHeader from "./Header";
import { useDispatch, useSelector } from 'react-redux';

import { addMessage,deleteMessage,editMessage } from "../features/chat/chatSlice";


function ChatUI() {
  const [messages, setMessages] = useState([]);
  const [newMessage, setNewMessage] = useState("");
  const [isFirstUser, setIsFirstUser] = useState(true);
  const messagesEndRef = useRef(null);
  const [editingMessageId, setEditingMessageId] = useState(null);
  const [editingMessageContent, setEditingMessageContent] = useState("");

  
  const chats = useSelector((state) => state.chats);
  const dispath = useDispatch()

  


  // generate a unique ID for each message
  const generateId = () => {
    return Math.floor(Math.random() * 100000);
  };

  const handleSubmit = (event) => {
    event.preventDefault();
    if (newMessage.trim()) { // what it done here?
      const message = {
        id: generateId(),
        content: newMessage.trim(),
        sender: isFirstUser ? "user1" : "user2",
      };
      setMessages([...messages, message]);
    }
    setNewMessage("");
  };

  const handleEdit = (id, content) => {
    setEditingMessageId(id);
    setEditingMessageContent(content);
  };

  const handleSaveEdit = (id, content) => {
    const updatedMessages = messages.map((message) => {
      if (message.id === id) {
        return { ...message, content: content };
      }
      return message;
    });
    setMessages(updatedMessages);
    setEditingMessageId(null);
    setEditingMessageContent("");
  };

  const handleDelete = (id) => {
    const updatedMessages = messages.filter((message) => message.id !== id);
    setMessages(updatedMessages);
  };

  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [messages]);

  return (
    <div className="grid-container ">
           <ChatHeader /> 

      <div className="chatGrid-UI">

        <div className="UI">
       

          <div className="chat-container">
            <ul className="text">
              {messages.map((message) => (
                <div key={message.id} className="message-container">
                  {message.sender === "user1" ? ( // Change this implementation, make use of a flag which tells whether the message is sender/reciever.
                    <div>
                    <span>
                    <div className="message-left">
                     
                     
                      <div className="box">
                        {editingMessageId === message.id ? (
                          <>
                            <input
                              type="text"
                              value={editingMessageContent}
                              onChange={(e) =>
                                setEditingMessageContent(e.target.value)
                              }
                            />
                            
                            <button
                              onClick={() =>
                                handleSaveEdit(
                                  editingMessageId,
                                  editingMessageContent
                                )
                              }
                            >
                              Save
                            </button>
                          </>
                        ) : (
                          message.content
                        )}
                      </div>
                      <div className="buttons">
                        {editingMessageId !== message.id && (
                          <li>
                            {" "}
                            <button
                              onClick={() =>
                                handleEdit(message.id, message.content)
                              }
                            >
                              Edit
                            </button>
                          </li>
                        )}
                        <li>
                          {" "}
                          <button onClick={() => handleDelete(message.id)}>
                            Delete
                          </button>
                        </li>
                      </div>
                    </div>
                    </span>
                    {/* <span>
                    <Space className="dropdown-demo"/>
                      <Dropdown droplist={dropList} position="bl">
                        <Button type="text">
                         : 
                        </Button>
                      </Dropdown>
                    </span> */}
                    </div>
                    
                    
                    
                  ) : (
                    <div className="message-right">
                      <div className="box">
                        {editingMessageId === message.id ? (
                          <>
                            <input
                              type="text"
                              value={editingMessageContent}
                              onChange={(e) =>
                                setEditingMessageContent(e.target.value)
                              }
                            />
                            <button
                              onClick={() =>
                                handleSaveEdit(
                                  editingMessageId,
                                  editingMessageContent
                                )
                              }
                            >
                              Save
                            </button>
                            {/* <button onClick={handleCancelEdit}>Cancel</button> */}
                          </>
                        ) : (
                          message.content
                        )}
                      </div>
                      <div className="buttons">
                        {editingMessageId !== message.id && (
                          <button
                            onClick={() =>
                              handleEdit(message.id, message.content)
                            }
                          >
                            Edit
                          </button>
                        )}
                        <button onClick={() => handleDelete(message.id)}>
                          Delete
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              ))}
              <div ref={messagesEndRef} />
            </ul>
          </div>
          
          <div className="container-form">
            <div className="form">
              <form onSubmit={handleSubmit} className="form-container">
                <div className="form-childOne">
                  <input
                    type="text"
                    className="input-section"
                    value={newMessage}
                    onChange={(event) => setNewMessage(event.target.value)}
                  />
                </div>

                <div className="form-childtwo">
                  <div className="switch">
                    <label>
                      <input
                        type="checkbox"
                        checked={isFirstUser}
                        onChange={() => setIsFirstUser(!isFirstUser)}
                      />
                      <span className="slider round"></span>
                      <br></br>
                      <br></br>
                      {/* {/ {isFirstUser ? "user1" : "user2"} /} */}
                    </label>
                  </div>
                </div>

                <div className="form-childthree">
                  <button type="submit">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      className="bi bi-send-fill"
                      viewBox="0 0 16 16"
                    >
                      <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z" />
                    </svg>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <Search />
      <ChatSidebar />
    </div>
  );
}

export default ChatUI;



.................








import React, { useState } from 'react';
import {
  MDBContainer,
  MDBTabs,
  MDBTabsItem,
  MDBTabsLink,
  MDBTabsContent,
  MDBTabsPane,
  MDBBtn,
  MDBIcon,
  MDBInput,
  MDBCheckbox
}
from 'mdb-react-ui-kit';

function App() {

  const [justifyActive, setJustifyActive] = useState('tab1');;

  const handleJustifyClick = (value) => {
    if (value === justifyActive) {
      return;
    }

    setJustifyActive(value);
  };

  return (
    <MDBContainer className="p-3 my-5 d-flex flex-column w-50">

      <MDBTabs pills justify className='mb-3 d-flex flex-row justify-content-between'>
        <MDBTabsItem>
          <MDBTabsLink onClick={() => handleJustifyClick('tab1')} active={justifyActive === 'tab1'}>
            Login
          </MDBTabsLink>
        </MDBTabsItem>
        <MDBTabsItem>
          <MDBTabsLink onClick={() => handleJustifyClick('tab2')} active={justifyActive === 'tab2'}>
            Register
          </MDBTabsLink>
        </MDBTabsItem>
      </MDBTabs>

      <MDBTabsContent>

        <MDBTabsPane show={justifyActive === 'tab1'}>

          <div className="text-center mb-3">
            <p>Sign in with:</p>

            <div className='d-flex justify-content-between mx-auto' style={{width: '40%'}}>
              <MDBBtn tag='a' color='none' className='m-1' style={{ color: '#1266f1' }}>
                <MDBIcon fab icon='facebook-f' size="sm"/>
              </MDBBtn>

              <MDBBtn tag='a' color='none' className='m-1' style={{ color: '#1266f1' }}>
                <MDBIcon fab icon='twitter' size="sm"/>
              </MDBBtn>

              <MDBBtn tag='a' color='none' className='m-1' style={{ color: '#1266f1' }}>
                <MDBIcon fab icon='google' size="sm"/>
              </MDBBtn>

              <MDBBtn tag='a' color='none' className='m-1' style={{ color: '#1266f1' }}>
                <MDBIcon fab icon='github' size="sm"/>
              </MDBBtn>
            </div>

            <p className="text-center mt-3">or:</p>
          </div>

          <MDBInput wrapperClass='mb-4' label='Email address' id='form1' type='email'/>
          <MDBInput wrapperClass='mb-4' label='Password' id='form2' type='password'/>

          <div className="d-flex justify-content-between mx-4 mb-4">
            <MDBCheckbox name='flexCheck' value='' id='flexCheckDefault' label='Remember me' />
            <a href="!#">Forgot password?</a>
          </div>

          <MDBBtn className="mb-4 w-100">Sign in</MDBBtn>
          <p className="text-center">Not a member? <a href="#!">Register</a></p>

        </MDBTabsPane>

        <MDBTabsPane show={justifyActive === 'tab2'}>

          <div className="text-center mb-3">
            <p>Sign un with:</p>

            <div className='d-flex justify-content-between mx-auto' style={{width: '40%'}}>
              <MDBBtn tag='a' color='none' className='m-1' style={{ color: '#1266f1' }}>
                <MDBIcon fab icon='facebook-f' size="sm"/>
              </MDBBtn>

              <MDBBtn tag='a' color='none' className='m-1' style={{ color: '#1266f1' }}>
                <MDBIcon fab icon='twitter' size="sm"/>
              </MDBBtn>

              <MDBBtn tag='a' color='none' className='m-1' style={{ color: '#1266f1' }}>
                <MDBIcon fab icon='google' size="sm"/>
              </MDBBtn>

              <MDBBtn tag='a' color='none' className='m-1' style={{ color: '#1266f1' }}>
                <MDBIcon fab icon='github' size="sm"/>
              </MDBBtn>
            </div>

            <p className="text-center mt-3">or:</p>
          </div>

          <MDBInput wrapperClass='mb-4' label='Name' id='form1' type='text'/>
          <MDBInput wrapperClass='mb-4' label='Username' id='form1' type='text'/>
          <MDBInput wrapperClass='mb-4' label='Email' id='form1' type='email'/>
          <MDBInput wrapperClass='mb-4' label='Password' id='form1' type='password'/>

          <div className='d-flex justify-content-center mb-4'>
            <MDBCheckbox name='flexCheck' id='flexCheckDefault' label='I have read and agree to the terms' />
          </div>

          <MDBBtn className="mb-4 w-100">Sign up</MDBBtn>

        </MDBTabsPane>

      </MDBTabsContent>

    </MDBContainer>
  );
}

export default App;





......local storege.................................................................................................


import React, { useState, useEffect } from 'react';

const Popup = () => {
    const [name, setName] = useState('');
    const [email, setEmail] = useState('');
    const [phone, setPhone] = useState('');

    useEffect(() => {
        const userData = JSON.parse(localStorage.getItem('user'));
        if (userData) {
            setName(userData.name);
            
        }
    }, []);

    const onChangeName = (e) => {
        setName(e.target.value);
    };

   
    const onSubmit = (e) => {
        e.preventDefault();
        const userData = {
            name: name,
            
        };
        localStorage.setItem('user', JSON.stringify(userData));
        setName('');
        
    };

    return (
        <div className="container">
            <form onSubmit={onSubmit}>
                <div className="form-group">
                    <label>Name</label>
                    <input type="text" className="form-control" value={name} onChange={onChangeName} />
                </div>
                
                <button type="submit" className="btn btn-primary btn-block">Submit</button>
            </form>
        </div>
    );
};

export default Popup;

........................................................................


// import React, { useState, useEffect } from "react";
// import Button from "react-bootstrap/Button";
// import Modal from "react-bootstrap/Modal";

// export const Popup = () => {
//   const [show, setShow] = useState(false);
//   const [userName, setUserName] = useState("");
//   const [name, setName] = useState('');

//   const handleClose = () => setShow(false);
//   const handleShow = () => setShow(true);

//   useEffect(() => {
//     setTimeout(() => {
//       setShow(true);
//     }, 500);
//     const userData = JSON.parse(localStorage.getItem('user'));
//     if (userData) {
//       setName(userData.name);
//     }
//   }, []);



//   const onChangeName = (e) => {
//     setName(e.target.value);
//   };

//   const onSubmit = (e) => {
//     e.preventDefault();
//     const userData = {
//       name: name,
//     };
//     localStorage.setItem('user', JSON.stringify(userData));
//     setName('');
//     handleClose(); 
//   };

//   return (
//     <>
//       <Modal show={show} onHide={handleClose}>
//         <Modal.Header closeButton>
//           <Modal.Title>Login</Modal.Title>
//         </Modal.Header>
//         <Modal.Body>
//           <form onSubmit={onSubmit}>
//             <div className="form-group">
//               <label>Name</label>
//               <input type="text" className="form-control" value={name} onChange={onChangeName} />
//             </div>
//           </form>
//         </Modal.Body>
//         <Modal.Footer>
//           <Button variant="secondary" onClick={handleClose}>
//             Close
//           </Button>
//           <Button variant="primary" onClick={onSubmit}>
//             Login
//           </Button>
//         </Modal.Footer>
//       </Modal>
//     </>
//   );
// };

// export default Popup;
............................................................................................................................................


import React, { useState, useEffect } from "react";
import { useSelector, useDispatch } from "react-redux";
import { setName, resetName, listName } from "../features/chat/userSlice";
import Button from "react-bootstrap/Button";
import Modal from "react-bootstrap/Modal";

export const Popup = () => {
  // const show = useSelector((state) => state.users.show);
  const name = useSelector((state) => state.users.name);
  const userList = useSelector((state) => state.users.userList);
  const dispatch = useDispatch();
  const [isValidUser, setIsValidUser] = useState(true);
  const [showModal, setShowModal] = useState(false);
  

  useEffect(() => {
    setTimeout(() => {
      const userData = JSON.parse(localStorage.getItem("user"));
      if (userData) {
        dispatch(setName(userData.name));
        setShowModal(false);
      }else{
        setShowModal(false);
      }
    });
  }, []);

  const onChangeName = (e) => {
    dispatch(setName(e.target.value));
  };

  const login = (e) => {
    // e.preventDefault();
    const userData = {
      name: name,
    };
    localStorage.setItem("user", JSON.stringify(userData));
    dispatch(resetName());
    const isValidUser = userList.includes(name);

    if (isValidUser) {
      dispatch(listName());
      setShowModal(false);
    } else {
      setIsValidUser(false);
    }

     

    
  };

  return (
    <>
      <Modal
        show={showModal}
        onHide={() => {}}
        onClick={(e) => e.stopPropagation()}
      >
        <Modal.Header>
          <Modal.Title>Login</Modal.Title>
        </Modal.Header>
        <Modal.Body>
          <form onSubmit={login}>
            <div className="form-group">
              <label>Name</label>
              <input
                type="text"
                className="form-control"
                value={name}
                onChange={onChangeName}
              />
              {!isValidUser && <p className="text-danger">Invalid name!</p>}
            </div>
          </form>
        </Modal.Body>
        <Modal.Footer>
          <Button variant="success" onClick={login}>
            Login
          </Button>
          <Button variant="dark"  >
            Logout
          </Button>
        </Modal.Footer>
      </Modal>
    </>
  );
};

export default Popup;
................................................................................................................................................




import React, { useState, useEffect } from "react";
import { useSelector, useDispatch } from "react-redux";
import { setName, resetName, listName } from "../features/chat/userSlice";
import Button from "react-bootstrap/Button";
import Modal from "react-bootstrap/Modal";

export const Popup = () => {
  const name = useSelector((state) => state.users.name);
  const userList = useSelector((state) => state.users.userList);
  const dispatch = useDispatch();
  const [isValidUser, setIsValidUser] = useState(true);
  const [showModal, setShowModal] = useState(false);

  useEffect(() => {
    setTimeout(() => {
      const userData = JSON.parse(localStorage.getItem("user"));
      if (userData) {
        dispatch(setName(userData.name));
        setShowModal(false);
      } else {
        setShowModal(false);
      }
    });
  }, []);

  const onChangeName = (e) => {
    dispatch(setName(e.target.value));
  };

  const login = (e) => {
    e.preventDefault();
    const userData = {
      name: name,
    };
    localStorage.setItem("user", JSON.stringify(userData));
    dispatch(resetName());
    const isValidUser = userList.includes(name);

    if (isValidUser) {
      dispatch(listName());
      setShowModal(false);
    } else {
      setIsValidUser(false);
    }
  };

  const logout = () => {
    localStorage.removeItem("user");
  };

  return (
    <>
      <Modal
        show={showModal}
        onHide={() => {}}
        onClick={(e) => e.stopPropagation()}
      >
        <Modal.Header>
          <Modal.Title>Login</Modal.Title>
        </Modal.Header>
        <Modal.Body>
          <form onSubmit={login}>
            <div className="form-group">
              <label>Name</label>
              <input
                type="text"
                className="form-control"
                value={name}
                onChange={onChangeName}
              />
              {!isValidUser && <p className="text-danger">Invalid name!</p>}
            </div>
          </form>
        </Modal.Body>
        <Modal.Footer>
          <Button variant="success" onClick={login}>
            Login
          </Button>
          <Button variant="dark" onClick={logout}>
            Logout
          </Button>
        </Modal.Footer>
      </Modal>
    </>
  );
};

export default Popup;





.................................popup.........................................


import React, { useState, useEffect } from "react";
import { useSelector, useDispatch } from "react-redux";
import { setName, resetName, listName } from "../features/chat/userSlice";
import Button from "react-bootstrap/Button";
import Modal from "react-bootstrap/Modal";

export const Popup = () => {
  const name = useSelector((state) => state.users.name);
  const userList = useSelector((state) => state.users.userList);
  const dispatch = useDispatch();
  const [isValidUser, setIsValidUser] = useState(true);
  const [showModal, setShowModal] = useState(false);
  const [isLoggedIn, setIsLoggedIn] = useState(false); // Track if the user is logged in

  useEffect(() => {
    const userData = localStorage.getItem("user");
    if (userData) {
      dispatch(setName(userData.name));
      setIsLoggedIn(true); // Set the logged-in state
    } else {
      setShowModal(true);
    }
  }, []);

  const onChangeName = (e) => {
    dispatch(setName(e.target.value));
  };

  const login = (e) => {
    e.preventDefault();
    const userData = {
      name: name,
    };
    localStorage.setItem("user", userData.name);
    dispatch(resetName());
    const isValidUser = userList.includes(name);

    if (isValidUser) {
      dispatch(listName());
      setShowModal(false);
      setIsLoggedIn(true); // Set the logged-in state
    } else {
      setIsValidUser(false);
    }
  };

  const logout = () => {
    localStorage.removeItem("user");
    setIsLoggedIn(false); // Set the logged-in state
    setShowModal(true);
  };

  if (!isLoggedIn) {
    // Show the login modal if the user is not logged in
    return (
      <>
        <Modal
          show={showModal}
          onHide={() => {}}
          onClick={(e) => e.stopPropagation()}
        >
          <Modal.Header>
            <Modal.Title>Login</Modal.Title>
          </Modal.Header>
          <Modal.Body>
            <form onSubmit={login}>
              <div className="form-group">
                <label>Name</label>
                <input
                  type="text"
                  className="form-control"
                  value={name}
                  onChange={onChangeName}
                />
                {!isValidUser && <p className="text-danger">Invalid name!</p>}
              </div>
            </form>
          </Modal.Body>
          <Modal.Footer>
            <Button variant="success" onClick={login}>
              Login
            </Button>
          </Modal.Footer>
        </Modal>
      </>
    );
  }

  // Render the protected content when the user is logged in
  return (
    <>
      <div>
        <h1>Welcome, {name}!</h1>
        <Button variant="danger" onClick={logout}>
          Logout
        </Button>
      </div>
    </>
  );
};

export default Popup;




...................................................................


import React, { useEffect, useState } from "react";
import { useNavigate } from "react-router-dom";
import { useSelector } from "react-redux";

const ProtectedRoute = ({ children }) => {
  const user = useSelector((state) => state.users);
  const location = useLocation();

  if (!user.state) {
    const isLoggedIn = localStorage.getItem("user") !== null;

    if (!isLoggedIn) {
      return <Navigate to="/login" state={{ from: location }} replace />;
    }
  }

  const [isShow, setIsShow] = useState(false);

  useEffect(() => {
    if (user.name === localStorage.getItem("user")) {
      setIsShow(true);
    }
  }, [user.name, localStorage.getItem("user")]);

  return (
    <>
      {isShow && children}
    </>
  );
};

export default ProtectedRoute;



...............................................................................................


import { useSelector, useIsLoggedIn } from "react-redux";
import { Navigate, useLocation } from "react-router-dom";

const ProtectedRoute = ({ children }) => {
  const userList = useSelector((state) => state.users.userList);
  const location = useLocation();
  const navigate = useNavigate();
  const isLoggedIn = useIsLoggedIn();

  if (!userList) {
    const isLoggedIn = localStorage.getItem("user");

    if (!isLoggedIn) {
      return <Navigate to="/login" state={{ from: location }} replace />;
    }
  } else {
    const currentUser = localStorage.getItem("user");

    if (userList.includes(currentUser) && isLoggedIn) {
      // Navigate to the home page if the user is already logged in.
      navigate("/home");

      // Return null so that the rest of the ProtectedRoute component is not rendered.
      return null;
    } else {
      return <Navigate to="/login" state={{ from: location }} replace />;
    }
  }
};

export default ProtectedRoute;




